<!DOCTYPE html>
<html>
<title>OSO PLAYER ALPHA</title>
<!-- INCLUDES -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=VT323">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.2/howler.core.min.js"></script>
<script src="./radio.js"></script>
<link rel="stylesheet" href="./radio.css">

<body onload="getTrackID()">
    <!-- BEARS AUDIO -->
    <div id="osoContainer" onclick="blowHorn(getRandomColor())">
        <!-- TRACK ID -->
        <div id="idContainer"><b>NP: </b><span id="nowplaying">RETRIEVING TRACK ID...</span></div>
        <!-- BEARHORN COUNTER -->
        <div id="countContainer">üêªx<strong><span id="hornCount">0 <i>click me plz :)</i></span></strong></div>
        <!-- CENTER CONTAINER -->
        <div class="centerContainer" onclick="blowHorn(getRandomColor())">
            <!-- WILLIAM <img id="william" src="./images/bear2.png" alt="WILLIAM"> --></div>
        <!-- GIPHY -->
        <iframe id="giphy" src="http://tv.giphy.com/bear" frameborder="0" scrolling="no"></iframe>
        <!-- BEARSTREAM -->
        <audio id="bearstream" preload="none" controls>
            <source src="http://listen.seriousbears.net/" type="audio/mpeg"> </audio>
    </div>
    <!-- TWITCH VIDEO -->
    <div id="twitchContainer">
        <script src="http://player.twitch.tv/js/embed/v1.js"></script>
        <div id="seriousbearsVideo"></div>
        <script type="text/javascript">
            var options = {
                width: 1280
                , height: 720
                , channel: "bobross"
            , };
            var twitchPlayer = new Twitch.Player("seriousbearsVideo", options);
            // Here are all the possible Twitch events which would trigger a call to displayModule()
            twitchPlayer.addEventListener(Twitch.Player.ONLINE, () => {
                displayModule('twitch');
                console.log("TWITCH PLAYER EVENT: Twitch is Online!");
            });
            twitchPlayer.addEventListener(Twitch.Player.OFFLINE, () => {
                displayModule('oso');
                console.log("TWITCH PLAYER EVENT: Twitch BECAME Offline after previously being Online!");
            });
            twitchPlayer.addEventListener(Twitch.Player.ENDED, () => {
                displayModule('oso');
                console.log("TWITCH PLAYER EVENT: Twitch is ENDED - could have already been that way...");
            });
        </script>
    </div>
</body>
<script>
    // POLL THE STREAM API FOR NEW TRACKID EVERY 45 SECONDS..
    window.setInterval(function () {
        console.log("polling for a new TrackID and checking Twitch stream status...");
        getTrackID();
        getTwitchStatus();
    }, 45000);
</script>

</html>